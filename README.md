# 曲线拟合软件（里面的背景图和图标是使用AI生成的，侵删）

一个功能强大的曲线拟合工具，支持实验数据模式和数学分析模式，提供多种拟合方法和异常值过滤功能。

## 项目介绍

软件支持两种主要工作模式：实验数据模式（适用于实验测量数据的处理与分析）和数学模式（适用于数学函数的拟合与分析）。

## 功能特性

### 通用功能
- 支持多种拟合方法
- 异常值检测与过滤（单次过滤和迭代过滤）
- 数据可视化展示
- 详细的统计分析报告
- 用户友好的界面操作

### 实验数据模式
- 多项式拟合
- 平滑样条拟合
- 迭代异常值过滤算法
- 数据统计分析
- 拟合质量评估

### 数学模式
- 多种数学函数拟合
- 迭代异常值过滤（固定最大迭代次数为5）
- 回归系数计算
- 详细的统计结果展示

## 系统要求

- Python 3.7+
- 依赖库：PySide6, numpy, scipy, matplotlib

## 安装说明

1. 确保已安装Python 3.7或更高版本

2. 克隆或下载项目代码

3. 安装依赖库

```bash
pip install -r requirements.txt
```

主要依赖库版本：
- PySide6 （GUI框架）
- numpy （数值计算）
- matplotlib （绘图功能）
- scipy （科学计算和拟合算法）

## 使用方法

### 启动程序

在项目根目录下运行：

```bash
python main.py
```
（原本想上传.venv虚拟环境文件夹激活虚拟环境即可运行的，但是文件夹中文件太多，怕上传出问题，就没传。）

### 选择工作模式

启动后，首先选择工作模式（实验数据模式或数学模式）。

### 实验数据模式

1. 输入实验数据（X和Y坐标）
   - 支持手动输入
2. 选择拟合方法（多项式或平滑样条）
3. 设置异常值过滤参数（如果需要）
   - 通过spinbox调整过滤阈值
4. 点击拟合按钮进行分析
5. 查看拟合曲线和统计分析结果
   - 图表显示原始数据点（蓝色）和异常值（红色叉号）
   - 统计结果包括拟合参数、相关系数等
6. 支持导出曲线图片和X轴Y轴重命名

### 数学模式

1. 输入数据点
2. 选择拟合函数类型
   - 支持线性函数、二次函数、指数函数、对数函数等多种预设数学函数
3. 设置异常值过滤阈值（如果需要）
4. 执行回归分析
5. 查看分析结果和统计信息
6. 支持导出曲线图片和X轴Y轴重命名

### 数学函数类型

软件支持多种常见的数学函数拟合：
- 线性函数: y = a * x + b
- 二次函数: y = a * x² + b * x + c
- 指数函数: y = a * exp(b * x)
- 对数函数: y = a * log(x) + b
- 幂函数: y = a * x^b


## 异常值过滤
  **更新异常值过滤条件**
  
  改为每次过滤超出设定阈值的“疑似异常点”中误差最大的前25%（向下取整），避免对过渡数据造成误判导致误差以及极端异常值导致的局部异常值对曲线的影响大于正常值对曲线的影响（与过滤算法基于的假设相悖的情况）
  （2025/11/5第一次更新）
   
   （异常值过滤基于假设：正常值多于异常值且异常值对拟合曲线/回归曲线的影响小于正常值对曲线的影响，所以导致异常值和曲线值的误差绝对值大于正常值和曲线值的误差绝对值，基于以上假设，设计
   迭代过滤算法异常值。如若有误，欢迎指正。）
  
  **迭代过滤**：设置的提前停止条件为以下条件
   - 上一次迭代无异常值过滤
   - 数据点少于5个
   - 达到迭代次数上限

实验模式和数学模式时可过滤阈值可通过界面上的spinbox控件进行调整，影响过滤的严格程度。

实验模式迭代数可调，范围1~10（超过十次还有异常值想想你有没有认真做实验，咋这么多问题数据，不要着急找程序的问题。或者是犯了追求绝对精确的毛病。）

数学解题模式迭代数固定为5（都出成题目给你做了，异常值应该很明显，一两次迭代就能过滤掉吧？或者你自己人为不输入异常值。）

**提示：不是越精确越好** 精度过高有过拟合风险，导致虽然和实验数据相当贴合，但是与整体规律相悖。

（你的实验数据本身就有部分误差，以作者目前的知识和技术水平（小菜鸡），找不到办法解决问题。**欢迎提出改进建议**）

## 项目结构

```
fitted_curve/g2/
│   ├── __init__.py
│   ├── 曲线拟合-实验数据模式.ui
│   └── 曲线拟合-数学模式.ui
├── gui/                    # GUI实现代码
│   ├── __init__.py
│   ├── ui_choose_mode.py   # 模式选择界面
│   ├── ui_experiment_mode.py  # 实验模式界面
│   ├── ui_exp_mode_update.py  # 实验模式更新界面
│   ├── ui_math_mode.py     # 数学模式界面
│   └── experiment_mode_window.py  # 实验模式窗口实现
├── utils/                  # 工具函数
│   ├── __init__.py
│   ├── fitting_functions.py  # 拟合相关函数
│   ├── experiment_mode_utils.py  # 实验模式工具函数
│   └── math_mode_utils.py  # 数学模式工具函数
├── auto_init.py            # 自动初始化脚本
├── main.py                 # 主程序入口
├── requirements.txt        # 依赖库列表
└── README.md               # 项目说明文档
```

## 技术说明

### 异常值检测算法

- **迭代过滤**：通过多次迭代提高过滤效果，每次迭代基于当前数据重新拟合并检测异常值

### 拟合算法

- **多项式拟合**：使用最小二乘法进行多项式拟合
- **样条拟合**：使用scipy的样条插值进行平滑拟合
- **数学函数拟合**：支持多种预定义数学函数的拟合

## 许可证

本项目采用GNU通用公共许可证（GPL v3）。（pyside6是gnu 3.0的许可证）

## 联系方式

如有问题或建议，请联系项目作者。
